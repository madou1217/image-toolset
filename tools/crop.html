<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>图片裁剪 — 图片工具集</title>
<meta name="description" content="在线图片裁剪工具，支持自由裁剪、固定比例、旋转和翻转">
<link rel="stylesheet" href="../css/common.css">
<link rel="stylesheet" href="../css/crop.css">
</head>
<body class="crop-page">

<!-- Back button -->
<a href="../index.html" class="back-btn">
  <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
  返回工具集
</a>

<!-- Upload Area -->
<div id="upload-area" class="upload-area">
  <div class="icon">
    <svg viewBox="0 0 24 24"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"/></svg>
  </div>
  <h2>拖拽图片到此处</h2>
  <p>或点击选择文件 · 支持 JPG / PNG / WebP</p>
</div>

<!-- Hidden file input -->
<input type="file" id="file-input" accept="image/*" style="display:none">

<!-- Crop Workspace -->
<div id="crop-workspace" class="crop-workspace">

  <!-- Toolbar -->
  <div class="toolbar">
    <button class="tb-btn" id="btn-new" title="选择新图片">
      <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
      新图片
    </button>
    <div class="tb-sep"></div>

    <!-- Ratio presets -->
    <div class="ratio-bar">
      <button class="ratio-btn active" data-ratio="free">自由</button>
      <button class="ratio-btn" data-ratio="1:1">1:1</button>
      <button class="ratio-btn" data-ratio="4:3">4:3</button>
      <button class="ratio-btn" data-ratio="16:9">16:9</button>
      <button class="ratio-btn" data-ratio="3:2">3:2</button>
    </div>
    <div class="tb-sep"></div>

    <!-- Transforms -->
    <button class="tb-btn" id="btn-rotate-ccw" title="逆时针旋转 90°">
      <svg viewBox="0 0 24 24"><path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"/></svg>
    </button>
    <button class="tb-btn" id="btn-rotate-cw" title="顺时针旋转 90°">
      <svg viewBox="0 0 24 24"><path d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/></svg>
    </button>
    <button class="tb-btn" id="btn-flip-h" title="水平翻转">
      <svg viewBox="0 0 24 24"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8-2h2v24h-2V1zm8 8h2v2h-2v-2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2v2h-2V7zm0 8h2v2h-2v-2z"/></svg>
    </button>
    <button class="tb-btn" id="btn-flip-v" title="垂直翻转">
      <svg viewBox="0 0 24 24" style="transform:rotate(90deg)"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8-2h2v24h-2V1zm8 8h2v2h-2v-2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2v2h-2V7zm0 8h2v2h-2v-2z"/></svg>
    </button>
    <div class="tb-sep"></div>

    <button class="tb-btn" id="btn-reset" title="重置">重置</button>
    <div class="tb-sep"></div>

    <button class="tb-btn primary" id="btn-export" title="导出裁剪结果">
      <svg viewBox="0 0 24 24"><path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/></svg>
      导出 PNG
    </button>
  </div>

  <!-- Canvas -->
  <div id="crop-canvas-wrap" class="crop-canvas-wrap">
    <canvas id="crop-canvas"></canvas>
  </div>

  <!-- Crop Info -->
  <div class="crop-info">
    裁剪尺寸: <span class="dim" id="crop-info-dims">-- × --</span>
  </div>

</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<script type="module" src="../js/crop/app.js"></script>
</body>
</html>
